var emotes = {
    "4Head": 354,
    "ANELE": 3792,
    "ArgieB8": 51838,
    "ArsonNoSexy": 50,
    "AsianGlow": 74,
    "AthenaPMS": 32035,
    "BabyRage": 22639,
    "BatChest": 1905,
    "BCouch": 83536,
    "BCWarrior": 30,
    "BibleThump": 86,
    "BigBrother": 1904,
    "BionicBunion": 24,
    "BlargNaut": 38,
    "bleedPurple": 62835,
    "BloodTrail": 69,
    "BORT": 243,
    "BrainSlug": 881,
    "BrokeBack": 4057,
    "BuddhaBar": 27602,
    "ChefFrank": 90129,
    "cmonBruh": 84608,
    "CoolCat": 58127,
    "CorgiDerp": 49106,
    "CougarHunt": 21,
    "DAESuppy": 973,
    "DansGame": 33,
    "DatSheffy": 170,
    "DBstyle": 73,
    "deExcite": 46249,
    "deIlluminati": 46248,
    "DendiFace": 58135,
    "DogFace": 1903,
    "DOOMGuy": 54089,
    "duDudu": 62834,
    "EagleEye": 20,
    "EleGiggle": 4339,
    "FailFish": 360,
    "FPSMarksman": 42,
    "FrankerZ": 65,
    "FreakinStinkin": 39,
    "FUNgineer": 244,
    "FunRun": 48,
    "FuzzyOtterOO": 168,
    "GingerPower": 32,
    "GrammarKing": 3632,
    "HassaanChop": 20225,
    "HassanChop": 68,
    "HeyGuys": 30259,
    "HotPokket": 357,
    "HumbleLife": 46881,
    "ItsBoshyTime": 169,
    "Jebaited": 90,
    "JKanStyle": 15,
    "JonCarnage": 26,
    "KAPOW": 9803,
    "Kappa": 25,
    "KappaClaus": 74510,
    "KappaPride": 55338,
    "KappaRoss": 70433,
    "KappaWealth": 81997,
    "Keepo": 1902,
    "KevinTurtle": 40,
    "Kippa": 1901,
    "Kreygasm": 41,
    "Mau5": 30134,
    "mcaT": 35063,
    "MikeHogu": 81636,
    "MingLee": 68856,
    "MrDestructoid": 28,
    "MVGame": 29,
    "NinjaTroll": 45,
    "NomNom": 90075,
    "NoNoSpot": 44,
    "NotATK": 34875,
    "NotLikeThis": 58765,
    "OhMyDog": 81103,
    "OMGScoots": 91,
    "OneHand": 66,
    "OpieOP": 356,
    "OptimizePrime": 16,
    "OSfrog": 81248,
    "OSkomodo": 81273,
    "OSsloth": 81249,
    "panicBasket": 22998,
    "PanicVis": 3668,
    "PartyTime": 76171,
    "PazPazowitz": 19,
    "PeoplesChamp": 3412,
    "PermaSmug": 27509,
    "PeteZaroll": 81243,
    "PeteZarollTie": 81244,
    "PicoMause": 27,
    "PipeHype": 4240,
    "PJSalt": 36,
    "PMSTwin": 92,
    "PogChamp": 88,
    "Poooound": 358,
    "PraiseIt": 38586,
    "PRChase": 28328,
    "PunchTrees": 47,
    "PuppeyFace": 58136,
    "RaccAttack": 27679,
    "RalpherZ": 1900,
    "RedCoat": 22,
    "ResidentSleeper": 245,
    "riPepperonis": 62833,
    "RitzMitz": 4338,
    "RuleFive": 361,
    "SeemsGood": 64138,
    "ShadyLulu": 52492,
    "ShazBotstix": 87,
    "ShibeZ": 27903,
    "SmoocherZ": 89945,
    "SMOrc": 52,
    "SMSkull": 51,
    "SoBayed": 1906,
    "SoonerLater": 355,
    "SriHead": 14706,
    "SSSsss": 46,
    "StinkyCheese": 90076,
    "StoneLightning": 17,
    "StrawBeary": 37,
    "SuperVinlin": 31,
    "SwiftRage": 34,
    "TBCheesePull": 94039,
    "TBTacoLeft": 94038,
    "TBTacoRight": 94040,
    "TF2John": 1899,
    "TheRinger": 18,
    "TheTarFu": 70,
    "TheThing": 7427,
    "ThunBeast": 1898,
    "TinyFace": 67,
    "TooSpicy": 359,
    "TriHard": 171,
    "TTours": 38436,
    "twitchRaid": 62836,
    "UleetBackup": 49,
    "UncleNox": 3666,
    "UnSane": 71,
    "VaultBoy": 54090,
    "VoHiYo": 81274,
    "Volcania": 166,
    "WholeWheat": 1896,
    "WinWaker": 167,
    "WTRuck": 1897,
    "WutFace": 28087,
    "YouWHY": 4337
};

var bttvEmotes = {
    "OhMyGoodness": "54fa925e01e468494b85b54d",
    "PancakeMix": "54fa927801e468494b85b54e",
    "PedoBear": "54fa928f01e468494b85b54f",
    "PokerFace": "54fa92a701e468494b85b550",
    "RageFace": "54fa92d701e468494b85b552",
    "RebeccaBlack": "54fa92ee01e468494b85b553",
    "aPliS": "54fa8f4201e468494b85b538",
    "CiGrip": "54fa8fce01e468494b85b53c",
    "CHAccepted": "54fa8fb201e468494b85b53b",
    "FuckYea": "54fa90d601e468494b85b544",
    "DatSauce": "54fa903b01e468494b85b53f",
    "ForeverAlone": "54fa909b01e468494b85b542",
    "GabeN": "54fa90ba01e468494b85b543",
    "HailHelix": "54fa90f201e468494b85b545",
    "HerbPerve": "54fa913701e468494b85b546",
    "iDog": "54fa919901e468494b85b548",
    "rStrike": "54fa930801e468494b85b554",
    "ShoopDaWhoop": "54fa932201e468494b85b555",
    "SwedSwag": "54fa9cc901e468494b85b565",
    "M&Mjc": "54fab45f633595ca4c713abc",
    "bttvNice": "54fab7d2633595ca4c713abf",
    "TopHam": "54fa934001e468494b85b556",
    "TwaT": "54fa935601e468494b85b557",
    "WhatAYolk": "54fa93d001e468494b85b559",
    "WatChuSay": "54fa99b601e468494b85b55d",
    "aplis!": "54faa4d801e468494b85b576",
    "Blackappa": "54faa50d01e468494b85b578",
    "DogeWitIt": "54faa52f01e468494b85b579",
    "BadAss": "54faa4f101e468494b85b577",
    "SavageJerky": "54fb603201abde735115ddb5",
    "Kaged": "54fbf11001abde735115de66",
    "HHydro": "54fbef6601abde735115de57",
    "TaxiBro": "54fbefeb01abde735115de5b",
    "BroBalt": "54fbf00a01abde735115de5c",
    "ButterSauce": "54fbf02f01abde735115de5d",
    "BaconEffect": "54fbf05a01abde735115de5e",
    "SuchFraud": "54fbf07e01abde735115de5f",
    "CandianRage": "54fbf09c01abde735115de61",
    "She'llBeRight": "54fbefc901abde735115de5a",
    "OhhhKee": "54fbefa901abde735115de59",
    "SexPanda": "5502874d135896936880fdd2",
    "bttvWink": "550292c0135896936880fdef",
    "bttvAngry": "550291a3135896936880fde3",
    "bttvConfused": "550291be135896936880fde4",
    "bttvCool": "550291d4135896936880fde5",
    "bttvHappy": "55029200135896936880fde7",
    "bttvSad": "5502925d135896936880fdea",
    "bttvSleep": "55029272135896936880fdeb",
    "bttvSurprised": "55029288135896936880fdec",
    "bttvTongue": "5502929b135896936880fded",
    "bttvUnsure": "550292ad135896936880fdee",
    "bttvGrin": "550291ea135896936880fde6",
    "bttvHeart": "55029215135896936880fde8",
    "bttvTwink": "55029247135896936880fde9",
    "VisLaud": "550352766f86a5b26c281ba2",
    "SoSerious": "5514afe362e6bd0027aede8a",
    "BatKappa": "550b6b07ff8ecee922d2a3e7",
    "KaRappa": "550b344bff8ecee922d2a3c1",
    "YetiZ": "55189a5062e6bd0027aee082",
    "miniJulia": "552d2fc2236a1aa17a996c5b",
    "motnahP": "55288e390fa35376704a4c7a",
    "sosGame": "553b48a21f145f087fc15ca6",
    "CruW": "55471c2789d53f2d12781713",
    "RarePepe": "555015b77676617e17dd2e8e",
    "iamsocal": "54fbef8701abde735115de58",
    "haHAA": "555981336ba1901877765555",
    "FeelsBirthdayMan": "55b6524154eefd53777b2580",
    "RonSmug": "55f324c47f08be9f0a63cce0",
    "KappaCool": "560577560874de34757d2dc0",
    "Zappa": "5622aaef3286c42e57d8e4ab",
    "SqShy": "5622ab523286c42e57d8e4b2",
    "BasedGod": "566c9eeb65dbbdab32ec052b",
    "bUrself": "566c9f3b65dbbdab32ec052e",
    "ConcernDoge": "566c9f6365dbbdab32ec0532",
    "FapFapFap": "566c9f9265dbbdab32ec0538",
    "FeelsBadMan": "566c9fc265dbbdab32ec053b",
    "FeelsGoodMan": "566c9fde65dbbdab32ec053e",
    "FireSpeed": "566c9ff365dbbdab32ec0541",
    "FishMoley": "566ca00f65dbbdab32ec0544",
    "Hhhehehe": "566ca02865dbbdab32ec0547",
    "KKona": "566ca04265dbbdab32ec054a",
    "NaM": "566ca06065dbbdab32ec054e",
    "OhGod": "566ca07965dbbdab32ec0552",
    "PoleDoge": "566ca09365dbbdab32ec0555",
    "tehPoleCat": "566ca11a65dbbdab32ec0558",
    "AngelThump": "566ca1a365dbbdab32ec055b",
    "SourPls": "566ca38765dbbdab32ec0560",
    "LUL": "567b00c61ddbe1786688a633",
    "SaltyCorn": "56901914991f200c34ffa656",
    "FCreep": "56d937f7216793c63ec140cb",
    "VapeNation": "56f5be00d48006ba34f530a4",
    "ariW": "56fa09f18eff3b595e93ac26",
    "notsquishY": "5709ab688eff3b595e93c595",
    "DuckerZ": "573d38b50ffbf6cc5cc38dc9"
};

var template = "https://static-cdn.jtvnw.net/emoticons/v1/{image_id}/1.0";
var bttvTemplate = "https://cdn.betterttv.net/emote/{image_id}/1x";

function EscapeHtml(unsafe) {
    return unsafe
         .replace(/&/g, "&amp;")
         .replace(/</g, "&lt;")
         .replace(/>/g, "&gt;")
         .replace(/"/g, "&quot;")
         .replace(/'/g, "&#039;");
 }

function ProcessEmote(input, template, emote, id) {
    var url = template.replace("{image_id}", id);
    return input.replace(new RegExp("\\b" + emote + "\\b", "g"), "<img src='" + url + "'/>");
}

function InsertEmotes(input, wasTopPlayer, wheel) {
    input = EscapeHtml(input);

    if (wasTopPlayer) {
        input = input.replace(new RegExp("\\bKappa\\b", "g"), "<img src='file://{images}/custom_game/golden_kappa.png'/>");
    }

    for (var emote in emotes) {
        input = ProcessEmote(input, template, emote, emotes[emote])
    }

    for (var emote in bttvEmotes) {
        input = ProcessEmote(input, bttvTemplate, emote, bttvEmotes[emote])
    }

    if (wheel) {
        input = "<img src='file://{images}/control_icons/chat_wheel_icon.png' class='ChatWheelIcon'/>" + input;
    }

    return input;
}